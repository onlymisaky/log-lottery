import{u as t}from"./chunk-zwcfaLD_.js";import{a as e}from"./chunk-Czrwg_dh.js";import{d as a,u as n,r as s,l,s as i,h as o,o as c,a as r,b as u,t as b,j as p,F as m,B as d}from"./chunk-BJkgHwmU.js";const f={class:"flex gap-3"},g={for:"explore"},v=["accept"],y={class:"btn btn-primary btn-sm"},k={class:"p-0"},h={class:"mr-12 overflow-hidden w-72 whitespace-nowrap text-ellipsis"},C={class:"flex gap-3"},x=["onClick"],w=["onClick"],M=a({__name:"MusicConfig",setup(a){const{t:M}=n(),j=s(0),S=l.createInstance({name:"audioStore"}),D=t().globalConfig,{getMusicList:I}=i(D),L=s("audio/*"),T=s(I);function $(){D.resetMusicList(),S.clear()}function _(){D.clearMusicList(),S.clear()}async function B(){(await S.keys()).length>0&&S.iterate(((t,e)=>{D.addMusic({id:e+(new Date).getTime().toString(),name:e,url:"Storage"})}))}async function F(t){if(!/audio*/.test(t.target.files[0].type))return void(j.value=3);const{dataUrl:a,fileName:n}=await e(t.target.files[0]);S.setItem(`${(new Date).getTime().toString()}+${n}`,a).then((()=>{j.value=1,B()})).catch((()=>{j.value=2}))}return o((()=>{B()})),(t,e)=>(c(),r("div",null,[u("div",f,[u("button",{class:"btn btn-primary btn-sm",onClick:$},b(p(M)("button.reset")),1),u("label",g,[u("input",{id:"explore",type:"file",class:"",style:{display:"none"},accept:L.value,onChange:F},null,40,v),u("span",y,b(p(M)("button.upload")),1)]),u("button",{class:"btn btn-error btn-sm",onClick:_},b(p(M)("button.allDelete")),1)]),u("div",null,[u("ul",k,[(c(!0),r(m,null,d(T.value,(t=>(c(),r("li",{key:t.id,class:"flex items-center gap-6 pb-2 mb-3 divide-y"},[u("div",h,[u("span",null,b(t.name),1)]),u("div",C,[u("button",{class:"btn btn-primary btn-xs",onClick:e=>async function(t){D.setCurrentMusic(t,!1)}(t)},b(p(M)("button.play")),9,x),u("button",{class:"btn btn-error btn-xs",onClick:e=>function(t){D.removeMusic(t.id),S.removeItem(t.name)}(t)},b(p(M)("button.delete")),9,w)])])))),128))])])]))}});export{M as default};
